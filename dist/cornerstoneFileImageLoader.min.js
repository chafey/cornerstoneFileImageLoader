/*! cornerstone-file-image-loader - v0.5.1 - 2015-04-04 | (c) 2015 Chris Hafey | https://github.com/chafey/cornerstoneFileImageLoader */
var cornerstoneFileImageLoader=function(a,b,c){"use strict";function d(a){return"RGB"===a||"PALETTE COLOR"===a||"YBR_FULL"===a||"YBR_FULL_422"===a||"YBR_PARTIAL_422"===a||"YBR_PARTIAL_420"===a||"YBR_RCT"===a?!0:!1}function e(a,b,c){void 0===c&&(c=0);var e=a.string("x00280004"),f=d(e);return f===!1?cornerstoneWADOImageLoader.makeGrayscaleImage(b,a,a.byteArray,e,c):cornerstoneWADOImageLoader.makeColorImage(b,a,a.byteArray,e,c)}function f(b){var d=a.Deferred(),f=b;f=f.substring(12);var h,i=f.indexOf("frame=");if(-1!==i){var j=f.substr(i+6);h=parseInt(j),f=f.substr(0,i-1)}if(void 0!==h&&g.hasOwnProperty(f)){var k=g[f],l=e(k,b,h);return l.then(function(a){d.resolve(a)},function(){d.reject()}),d}var m=parseInt(f),n=c.getFile(m);if(void 0===n)return d.reject("unknown file index "+f),d;var o=new FileReader;return o.onload=function(a){var c=a.target.result,i=new Uint8Array(c),j=dicomParser.parseDicom(i);void 0!==h&&(g[f]=j);var k=e(j,b,h);k.then(function(a){d.resolve(a)},function(){d.reject()})},o.readAsArrayBuffer(n),d}void 0===c&&(c={});var g={};return b.registerImageLoader("dicomfile",f),c}($,cornerstone,cornerstoneFileImageLoader),cornerstoneFileImageLoader=function(a){"use strict";function b(a){var b=e.push(a);return b-1}function c(a){return e[a]}function d(){e=[]}void 0===a&&(a={});var e=[];return a.addFile=b,a.getFile=c,a.purge=d,a}(cornerstoneFileImageLoader);